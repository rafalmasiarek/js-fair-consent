var ConsentAnalytics=(()=>{var $=(u,c)=>()=>(c||u((c={exports:{}}).exports,c),c.exports);var K=$((x,k)=>{(function(u,c){typeof define=="function"&&define.amd?define([],c):typeof k=="object"&&k.exports?k.exports=c():u.ConsentAnalytics=c()})(typeof self<"u"?self:x,function(){"use strict";var u="1.4.3",c={en:{title:"Cookies & Analytics",body:"We use essential cookies and privacy-friendly analytics. With consent, we enable additional tools.",accept:"Accept",deny:"Deny",settings:"Settings"},pl:{title:"Ciasteczka i analityka",body:"U\u017Cywamy niezb\u0119dnych ciasteczek oraz analityki przyjaznej prywatno\u015Bci. Za Twoj\u0105 zgod\u0105 w\u0142\u0105czymy dodatkowe narz\u0119dzia.",accept:"Akceptuj\u0119",deny:"Odrzu\u0107",settings:"Ustawienia"}};function M(e){if(!e)return"en";var t=String(e).toLowerCase();if(c[t])return t;var a=t.split("-")[0];return c[a]?a:"en"}var n={debug:!1,nonce:null,integrity:null,cookieName:"allowCookies",cookieDays:365,cookieDomain:null,selectors:{banner:".consent-banner",title:'[data-i18n-key="title"]',body:'[data-i18n-key="body"]',accept:"#btnAccept",deny:"#btnDeny",acceptLabel:'[data-i18n-key="accept"]',denyLabel:'[data-i18n-key="deny"]'},respectGPC:!0,respectDNT:!0,locale:null,locales:c,granular:!1,categories:{analytics:0,marketing:0,personalization:0},services:{google:{enabled:!0,gtagId:"G-XXXXXXX",mode:"consent-only"},matomo:{enabled:!1,url:"https://matomo.example.com/",siteId:"1"},umami:{enabled:!0,websiteId:"UMAMI_WEBSITE_ID",src:"https://umami.is/a/script.js"},hotjar:{enabled:!1,hjid:0,hjsv:7}}},r={loaded:{google:!1,matomo:!1,umami:!1,hotjar:!1},scripts:Object.create(null)};function y(){if(n.debug)try{console.log("[ConsentAnalytics]",...arguments)}catch{}}function d(){if(n.debug)try{console.warn("[ConsentAnalytics]",...arguments)}catch{}}function z(e){return/^(localhost|127\.0\.0\.1)$/.test(e||location.hostname)}function b(e,t,a){var o=[e+"="+encodeURIComponent(t)];if(a){var s=a*86400;o.push("Expires="+new Date(Date.now()+s*1e3).toUTCString()),o.push("Max-Age="+s)}o.push("Path=/","SameSite=Lax"),location.protocol==="https:"&&o.push("Secure"),n.cookieDomain&&!z()&&o.push("Domain="+n.cookieDomain),document.cookie=o.join("; ")}function p(e){for(var t=e+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){var s=a[o].trim();if(s.indexOf(t)===0)return decodeURIComponent(s.slice(t.length))}return null}function X(e){var t=[e+"=; Expires=Thu, 01 Jan 1970 00:00:01 GMT; Max-Age=0","Path=/","SameSite=Lax"];location.protocol==="https:"&&t.push("Secure"),n.cookieDomain&&!z()&&t.push("Domain="+n.cookieDomain),document.cookie=t.join("; ")}function j(){if(!n.granular){var e=p(n.cookieName);return e==="1"?{analytics:1,marketing:1,personalization:1}:e==="0"?{analytics:0,marketing:0,personalization:0}:null}var t=p(n.cookieName);if(!t)return null;try{var a=JSON.parse(t);return{analytics:a.analytics?1:0,marketing:a.marketing?1:0,personalization:a.personalization?1:0}}catch{return null}}function v(e){if(!n.granular){var t=!!(e.analytics||e.marketing||e.personalization);b(n.cookieName,t?"1":"0",n.cookieDays);return}b(n.cookieName,JSON.stringify({analytics:!!e.analytics,marketing:!!e.marketing,personalization:!!e.personalization}),n.cookieDays)}function _(){if(!n.granular)return p(n.cookieName)==="1";var e=j();return!!(e&&(e.analytics||e.marketing||e.personalization))}function m(){try{if(n.respectGPC&&typeof navigator<"u"&&navigator.globalPrivacyControl||n.respectDNT&&typeof navigator<"u"&&(navigator.doNotTrack==="1"||navigator.msDoNotTrack==="1"))return!0}catch{}return!1}function q(){var e=document.querySelector(n.selectors.banner);e&&e.classList.add("show")}function w(){var e=document.querySelector(n.selectors.banner);e&&e.classList.remove("show")}function B(){var e=M(n.locale||(typeof navigator<"u"?navigator.language:"en")),t=n.locales[e]||n.locales.en,a=document.querySelector(n.selectors.title),o=document.querySelector(n.selectors.body),s=document.querySelector(n.selectors.acceptLabel),i=document.querySelector(n.selectors.denyLabel);a&&(a.textContent=t.title),o&&(o.textContent=t.body),s&&(s.textContent=t.accept),i&&(i.textContent=t.deny)}function C(e,t){t=t||{};var a="async"in t?!!t.async:!0,o=!!t.defer,s=t.attrs||{},i="timeout"in t?t.timeout:1e4,T="nonce"in t?t.nonce:n.nonce,A="integrity"in t?t.integrity:n.integrity;if(r.scripts[e])return r.scripts[e];var G=new Promise(function(Z,P){var l=document.createElement("script");l.src=e,l.async=a,l.defer=o,T&&l.setAttribute("nonce",T),A&&(l.integrity=A,l.crossOrigin="anonymous"),Object.keys(s).forEach(function(U){l.setAttribute(U,s[U])});var O=setTimeout(function(){l.onerror=l.onload=null,P(new Error("Timeout "+e))},i);l.onload=function(){clearTimeout(O),Z()},l.onerror=function(){clearTimeout(O),P(new Error("Failed "+e))},(document.head||document.documentElement).appendChild(l)});return r.scripts[e]=G,G}function R(){if(!(!n.services.google.enabled||n.services.google.mode==="disabled")){window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||function(){window.dataLayer.push(arguments)};var e=m()||!_();window.gtag("consent","default",{ad_storage:e?"denied":"granted",analytics_storage:e?"denied":"granted",ad_user_data:e?"denied":"granted",ad_personalization:e?"denied":"granted",functionality_storage:"granted",security_storage:"granted",wait_for_update:800})}}function V(){m()||typeof window.gtag=="function"&&window.gtag("consent","update",{ad_storage:"granted",analytics_storage:"granted",ad_user_data:"granted",ad_personalization:"granted"})}function g(){typeof window.gtag=="function"&&window.gtag("consent","update",{ad_storage:"denied",analytics_storage:"denied",ad_user_data:"denied",ad_personalization:"denied"})}function S(){if(!n.services.google.enabled||r.loaded.google)return Promise.resolve();var e=n.services.google.gtagId;return e?C("https://www.googletagmanager.com/gtag/js?id="+encodeURIComponent(e)).then(function(){window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",e,{allow_google_signals:_()&&!m()}),r.loaded.google=!0,y("Google loaded")}).catch(function(t){d("Google load failed",t)}):(d("Missing google.gtagId"),Promise.resolve())}function D(){if(n.services.matomo.enabled){window._paq=window._paq||[],window._paq.push(["requireConsent"]),window._paq.push(["enableLinkTracking"]);var e=n.services.matomo.url;window._paq.push(["setTrackerUrl",e+"matomo.php"]),window._paq.push(["setSiteId",n.services.matomo.siteId]),r.loaded.matomo||C(e+"matomo.js",{defer:!0}).then(function(){r.loaded.matomo=!0,y("Matomo loaded")}).catch(function(t){d("Matomo load failed",t)})}}function F(){window._paq&&window._paq.push(["rememberConsentGiven"])}function f(){window._paq&&window._paq.push(["forgetConsentGiven"])}function H(e){window._paq&&(e&&window._paq.push(["setCustomUrl",e]),window._paq.push(["trackPageView"]))}function h(e){for(var t=document.querySelectorAll("script[src]"),a=0;a<t.length;a++)t[a].src===e&&t[a].parentNode.removeChild(t[a]);delete r.scripts[e]}function L(e){if(e=e||{},!!n.services.umami.enabled){var t=n.services.umami.src||"https://umami.is/a/script.js";if(r.loaded.umami&&e.reload&&(h(t),r.loaded.umami=!1),!r.loaded.umami){var a={"data-website-id":n.services.umami.websiteId};e.anonymous&&(a["data-anonymous"]="true"),C(t,{defer:!0,attrs:a}).then(function(){r.loaded.umami=!0,y("Umami loaded",e)}).catch(function(o){d("Umami load failed",o)})}}}function E(){!n.services.hotjar.enabled||r.loaded.hotjar||(function(e,t,a,o,s,i){e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:n.services.hotjar.hjid,hjsv:n.services.hotjar.hjsv},s=t.getElementsByTagName("head")[0],i=t.createElement("script"),i.async=1,i.src=a+e._hjSettings.hjid+o+e._hjSettings.hjsv,n.nonce&&i.setAttribute("nonce",n.nonce),s.appendChild(i)}(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv="),r.loaded.hotjar=!0,y("Hotjar loaded"))}function J(e){window.gtag&&window.gtag("event","page_view",{page_location:location.origin+(e||location.pathname+location.search)}),H(e)}function I(e,t){return Object.keys(t||{}).forEach(function(a){t[a]&&typeof t[a]=="object"&&!Array.isArray(t[a])?(e[a]=e[a]&&typeof e[a]=="object"?e[a]:{},I(e[a],t[a])):e[a]=t[a]}),e}function N(e){n.services.google.enabled&&n.services.google.mode!=="disabled"&&(e.analytics||e.marketing||e.personalization?(V(),n.services.google.mode==="consent-only"&&S()):g()),n.services.matomo.enabled&&(e.analytics?F():f()),n.services.umami.enabled&&(e.analytics?L({anonymous:!1,reload:!0}):(h(n.services.umami.src||"https://umami.is/a/script.js"),r.loaded.umami=!1)),n.services.hotjar.enabled&&(e.marketing||e.personalization)&&E()}function W(e){e&&typeof e=="object"&&I(n,e),B(),document.querySelector(n.selectors.banner)||d("Banner element not found:",n.selectors.banner),n.services.google.enabled&&n.services.google.mode!=="disabled"&&(R(),n.services.google.mode==="preload"&&S()),D();var t=m(),a=j();!a&&!t?q():w(),a?N(a):t&&(g(),f());var o=document.querySelector(n.selectors.accept),s=document.querySelector(n.selectors.deny);o?o.addEventListener("click",function(){var i=n.granular?Object.assign({},n.categories):{analytics:1,marketing:1,personalization:1};n.granular||(i.analytics=1,i.marketing=1,i.personalization=1),v(i),w(),m()?(g(),f()):N(i)}):d("Accept button not found:",n.selectors.accept),s?s.addEventListener("click",function(){var i={analytics:0,marketing:0,personalization:0};v(i),w(),g(),f(),h(n.services.umami.src||"https://umami.is/a/script.js"),r.loaded.umami=!1}):d("Deny button not found:",n.selectors.deny),document.addEventListener("keydown",function(i){i.key==="Escape"&&w()})}function Q(){var e={analytics:0,marketing:0,personalization:0};v(e),g(),f(),h(n.services.umami.src||"https://umami.is/a/script.js"),r.loaded.umami=!1,q()}return{VERSION:u,init:W,hasConsent:_,readPrefs:j,writePrefs:v,revokeConsent:Q,trackPageView:J,setCookie:b,getCookie:p,eraseCookie:X,loadGoogle:S,loadMatomo:D,loadUmami:L,loadHotjar:E,CONFIG:n}})});return K();})();
